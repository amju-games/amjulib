// wavedemo-vert.txt

float a[2] = { 0.8, 0.2 };
float k[2] = { 1.0, 8.0 };
float w[2] = { 1.0, 8.0 };
float p[2] = { 0.0, 1.0 };

uniform float gTime; // don't initialise!
varying float gY;

float GetWaveHeight(float x, float z)
{
    float d = sqrt(x*x + z*z);
    float sum = 0.0;

    for (int i = 0; i < 2; i++)
    {
        sum += a[i] * sin(k[i] * d - gTime * w[i] + p[i]);
    }

    return sum;
}


void main()
{
  vec4 a = gl_Vertex;
  a.y = GetWaveHeight(a.x, a.z);
  gY = a.y;
  gl_Position = gl_ModelViewProjectionMatrix * a;
}
